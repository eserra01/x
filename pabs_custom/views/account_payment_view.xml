<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="pabs_account_payment_form_view" model="ir.ui.view">
      <field name="name">Campos</field>
      <field name="type">form</field>
      <field name="model">account.payment</field>
      <field name="groups_id" eval="[(4,ref('pabs_custom.group_contracts_manager'))]"/>
      <field name="inherit_id" ref="account.view_account_payment_form"/>
      <field name="arch" type="xml">

      <xpath expr="//field[@name='communication']" position="attributes">
        <attribute name="invisible">True</attribute>
      </xpath>

      <xpath expr="//field[@name='payment_date']" position="attributes">
          <attribute name="string">Fecha Cobranza</attribute>
      </xpath>

      <xpath expr="//field[@name='payment_date']" position="after">
          <field name="date_receipt" attrs="{'invisible' : [('payment_type','=','outbound')], 'required' : [('payment_type','=','inbound')]}"/>
          <field name="reference" attrs="{'invisible' : [('payment_type','=','outbound')], 'required' : [('payment_type','=','inbound')]}"/>
          <field name="Ecobro_receipt" attrs="{'invisible' : [('payment_type','=','outbound')], 'required' : [('payment_type','=','inbound')]}"/>
          <field name="debt_collector_code" attrs="{'invisible' : [('payment_type','=','outbound')], 'required' : [('payment_type','=','inbound')]}" domain="[('job_id.name','=','Cobrador')]"/>
        </xpath>

        <xpath expr="//field[@name='journal_id']" position="before">
          <field name="contract" attrs="{'invisible' : [('payment_type','=','outbound')], 'required' : [('payment_type','=','inbound')]}"/>
        </xpath>

        <xpath expr="//field[@name='journal_id']" position="after">
          <field name="way_to_pay" attrs="{'invisible' : [('payment_type','=','outbound')], 'required' : [('payment_type','=','inbound')]}"/>
          <field name="type_card_payment" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="card_number" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="card_expiration_month" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="card_expiration_year" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>

          <field name="number_phone" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="transfer_reference" attrs="{'invisible' : [('way_to_pay','!=','transfer')], 'required' :  [('way_to_pay','=','transfer')]}"/>
          <field name="authorization_number" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="transfer_date" attrs="{'invisible' : [('way_to_pay','!=','transfer')], 'required' :  [('way_to_pay','=','transfer')]}"/>
        </xpath>

        <xpath expr="//group[1]" position="after">
          <group string="Salida de comisiones" attrs="{'invisible' : [('payment_type','=','outbound')], 'required' : [('payment_type','=','inbound')]}">
            <field name="comission_output_ids" nolabel="1" readonly="1"/>
          </group>
        </xpath>
      </field>
    </record>

    <record id="mortuary_account_payment_form_view" model="ir.ui.view">
      <field name="name">Campos Funeraria</field>
      <field name="type">form</field>
      <field name="model">account.payment</field>
      <field name="inherit_id" ref="account.view_account_payment_form"/>
      <field name="groups_id" eval="[(4,ref('pabs_custom.funeral_recepcionist'))]"/>
      <field name="arch" type="xml">
         
         <xpath expr="//field[@name='partner_type']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>
        
         <xpath expr="//field[@name='partner_id']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>

         <xpath expr="//field[@name='company_id']" position="attributes">
          <attribute name="invisible">True</attribute>
        </xpath>

        <xpath expr="//field[@name='payment_type']" position="after">
          <field name="binnacle"/>
          <field name="payment_date"/>

          <field name="way_to_pay"/>
          <field name="type_card_payment" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="card_number" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="card_expiration_date" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="number_phone" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="transfer_reference" attrs="{'invisible' : [('way_to_pay','!=','transfer')], 'required' :  [('way_to_pay','=','transfer')]}"/>
          <field name="authorization_number" attrs="{'invisible' : [('way_to_pay','!=','credit_card')], 'required' :  [('way_to_pay','=','credit_card')]}"/>
          <field name="transfer_date" attrs="{'invisible' : [('way_to_pay','!=','transfer')], 'required' :  [('way_to_pay','=','transfer')]}"/>

      </xpath>

      <xpath expr="//field[@name='amount']" position="after">
        <field name="debt_collector_code"/>
        <field name="user_create_payment"/>
        <field name="balance_binnacle"/>
        <field name="date_of_death"/>
        <field name="place_of_death"/>
        <field name="additional"/>
      </xpath>

       <xpath expr="//field[@name='payment_date']" position="attributes">
          <attribute name="string">Fecha Cobranza</attribute>
      </xpath>

      <xpath expr="//field[@name='journal_id']" position="attributes">
        <attribute name="invisible">True</attribute>
      </xpath>


      </field>  
    </record>

  </odoo> 